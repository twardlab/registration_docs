Search.setIndex({"docnames": ["index", "installation", "step1", "step1_atlas_registration", "step1_help", "step2", "step2_atlas_registration", "step3", "step3_atlas_registration", "step3_help", "tutorial"], "filenames": ["index.rst", "installation.rst", "step1.rst", "step1_atlas_registration.rst", "step1_help.rst", "step2.rst", "step2_atlas_registration.rst", "step3.rst", "step3_atlas_registration.rst", "step3_help.rst", "tutorial.rst"], "titles": ["Welcome to the mouse brain registration documentation!", "Installation Guide", "(Step 1) Low-to-atlas registration", "Atlas to low resolution image registration", "Step 1 helper functions", "(Step 2) High-to-low registration", "Low resolution image to high resolution image registration", "(Step 3) Neuron Registration", "Neuron registration", "Step 3 helper functions", "Steps 1-3 tutorial"], "terms": {"instal": 0, "guid": 0, "step": [0, 3, 6, 8], "1": [0, 3, 8], "low": [0, 8, 9], "atla": [0, 4, 8], "resolut": [0, 4, 8], "imag": [0, 4, 8], "main": [0, 2, 3, 5, 6, 7, 8], "helper": [0, 2, 7], "function": [0, 2, 3, 7], "clip": [0, 2, 4], "draw_stack": [0, 2, 4], "ga_from_gid": [0, 2, 4], "small_to_big": [0, 2, 4], "str_to_2d_mat": [0, 2, 4], "trapezoid": [0, 2, 3, 4], "2": [0, 3, 6, 8], "high": [0, 8, 9], "3": [0, 1, 3, 4, 6, 8], "neuron": [0, 9], "classhack": [0, 7, 9], "unpickl": [0, 7, 9], "backup_unpickl": [0, 7, 9], "get_xyzoff": [0, 7, 9], "load_swc": [0, 7, 9], "str_to_list": [0, 7, 9], "index": [0, 4], "modul": [0, 1, 9], "search": 0, "page": 0, "In": [1, 3, 4, 8], "order": [1, 3, 4, 8, 9], "us": [1, 3, 4, 6, 8, 9], "registr": [1, 4, 9], "script": [1, 3, 6, 8], "thi": [1, 3, 4, 6, 8, 9], "directori": [1, 3, 6, 8, 9], "ensur": 1, "follow": 1, "ar": [1, 3, 4, 6, 8, 9], "o": 1, "sy": 1, "argpars": [1, 3], "glob": 1, "matplotlib": [1, 4, 9], "mpl_toolkit": 1, "nibabel": 1, "numpi": [1, 4, 9], "pickl": 1, "scipi": 1, "skimag": 1, "subprocess": 1, "time": 1, "torch": [1, 3, 4], "addition": 1, "custom": [1, 3, 6, 8], "python": [1, 3, 6, 8], "must": [1, 8], "clone": [1, 3, 6, 8], "from": [1, 3, 4, 6, 8, 9], "github": [1, 3, 6, 8], "The": [1, 3, 4, 6, 8, 9], "locat": [1, 3, 4, 6, 8, 9], "repositori": 1, "your": 1, "local": 1, "devic": [1, 3], "input": [1, 9], "argument": [1, 4, 9], "all": [1, 3, 4, 6, 8], "emlddmm": [1, 3, 6, 8], "http": [1, 3, 4, 6, 8], "com": [1, 3, 6, 8], "twardlab": [1, 3, 6, 8], "donglab_workflow": [1, 3, 6, 8], "mous": [3, 6, 8], "brain": [3, 6, 8, 9], "allen": [3, 8], "i": [3, 4, 6, 8, 9], "intend": [3, 6, 8], "save": [3, 6, 8], "initi": [3, 6], "intermedi": 3, "final": [3, 6, 8], "result": [3, 6, 8], "align": [3, 6], "singl": [3, 4, 8, 9], "3d": [3, 4, 6], "slice": [3, 4, 6, 8, 9], "npz": [3, 6, 8, 9], "multipl": [3, 4], "consecut": 3, "perform": [3, 4, 6, 8], "pipelin": [3, 6, 8], "": [3, 8], "librari": [3, 6, 8], "set": [3, 4, 8, 9], "can": [3, 4, 6, 8, 9], "provid": [3, 8, 9], "valid": 3, "autofil": 3, "major": [3, 6, 8], "requir": [3, 9], "previou": 3, "dataset": [3, 6, 8, 9], "new_data": 3, "user": 3, "sever": 3, "kei": 3, "regist": [3, 6, 8], "new": 3, "step1_atlas_registr": [3, 4], "str": [3, 4, 6, 8, 9], "name": [3, 6, 8, 9], "includ": [3, 6, 8], "output": [3, 6, 8], "file": [3, 6, 8, 9], "orient": [3, 8], "char": [3, 8], "portion": [3, 8], "captur": [3, 8], "w": [3, 6, 8], "whole": [3, 8], "l": [3, 8], "left": [3, 4, 6, 8], "hemispher": [3, 8], "r": [3, 8, 9], "right": [3, 6, 8], "list": [3, 4, 6, 8, 9], "more": 3, "path": [3, 6, 8, 9], "point": [3, 4, 8, 9], "anterior": [3, 4, 6, 8], "posterior": [3, 4, 6, 8], "outdir": [3, 6, 8], "where": [3, 4, 6, 8, 9], "store": [3, 4, 6, 8, 9], "atlas_path": [3, 8], "atlas": 3, "ara_nissl_50": [3, 8], "vtk": [3, 8], "average_template_50": [3, 8], "annotation_50": 3, "to_flip": 3, "int": [3, 4, 9], "A": [3, 4, 9], "indec": 3, "need": [3, 9], "flip": 3, "so": 3, "thei": [3, 9], "same": [3, 4, 6], "comput": [3, 4, 8, 9], "option": 3, "cpu": 3, "cuda": 3, "0": [3, 4, 9], "mp": 3, "4x4": [3, 4], "affin": [3, 4], "matrix": [3, 4], "estim": 3, "an": [3, 4, 9], "guess": 3, "algorithm": 3, "should": 3, "form": [3, 4, 8, 9], "x": [3, 4, 9], "If": [3, 6, 8, 9], "suppli": 3, "sensibl": 3, "defailt": 3, "produc": 3, "base": [3, 4, 9], "reproduc": 3, "work": 3, "yang": 3, "lab": 3, "morf": 3, "project": [3, 4], "e_path": [3, 6, 8], "which": [3, 4, 6, 8, 9], "d_path": [3, 6, 8], "save_fig0": 3, "bool": [3, 6, 8], "default": [3, 6, 8, 9], "fals": [3, 6, 8], "true": [3, 6, 8, 9], "histogram": 3, "voxel": [3, 4], "valu": [3, 4], "save_fig1": 3, "figur": [3, 4, 8, 9], "show": [3, 4], "mip": 3, "everi": [3, 4], "save_fig2": 3, "data": [3, 4, 9], "miss": 3, "re": [3, 6, 8], "save_fig3": 3, "displai": [3, 4], "save_fig4": 3, "map": [3, 4], "edg": [3, 9], "save_fig5": 3, "inner": [3, 4], "product": [3, 4], "allow": [3, 4], "u": [3, 4], "gradient": [3, 4], "descent": [3, 4], "save_fig6": 3, "12x12": [3, 4], "matric": [3, 4], "gid": [3, 4], "gjid": 3, "rais": [3, 6, 8], "except": [3, 6, 8], "ani": [3, 4], "cannot": 3, "access": 3, "contain": [4, 8, 9], "assist": [4, 9], "preprocess": [4, 9], "py": [4, 9], "step1_help": 4, "pixel": 4, "greater": 4, "than": 4, "less": 4, "paramet": [4, 9], "ndarrai": 4, "whose": 4, "expect": 4, "lie": 4, "rang": 4, "mai": [4, 9], "have": 4, "some": 4, "slightli": 4, "out": [4, 9], "return": [4, 9], "type": [4, 9], "j": 4, "xj": 4, "fig": 4, "none": 4, "kwarg": [4, 9], "gener": 4, "pyplot": 4, "size": 4, "len": 4, "ith": 4, "row": 4, "coron": 4, "axial": 4, "sagitt": 4, "plane": 4, "n": 4, "_i": 4, "col": 4, "element": [4, 8, 9], "first": [4, 9], "tripl": 4, "each": [4, 8, 9], "1d": 4, "arrai": [4, 9], "length": 4, "second": 4, "lengt": 4, "third": 4, "overlai": 4, "addit": 4, "visual": 4, "modifi": 4, "how": [4, 9], "These": 4, "pass": [4, 9], "ax": 4, "imshow": 4, "metric": 4, "tensor": 4, "space": 4, "transform": [4, 8, 9], "ident": 4, "approach": 4, "natur": 4, "choos": 4, "stepp": 4, "linear": 4, "translat": 4, "dure": 4, "optim": 4, "see": 4, "optic": 4, "flow": 4, "invari": 4, "doi": 4, "org": 4, "10": 4, "3389": 4, "fam": 4, "2021": 4, "718607": 4, "repres": [4, 8], "between": [4, 9], "tangent": 4, "vector": 4, "group": 4, "describ": 4, "we": 4, "want": 4, "pull": 4, "back": 4, "our": 4, "ga": 4, "composit": 4, "two": 4, "b": [4, 8, 9], "12": 4, "written": 4, "e": [4, 9], "12x1": 4, "Then": 4, "oper": 4, "could": 4, "a_big": 4, "b_vector": 4, "when": 4, "compon": 4, "tesor": 4, "altern": 4, "format": [4, 9], "As": 4, "abov": 4, "mat": [4, 9], "convert": [4, 9], "string": [4, 8, 9], "number": [4, 6, 8, 9], "scalar": 4, "out_arr": 4, "were": 4, "extract": 4, "di": 4, "dslice": 4, "model": 4, "cut": 4, "big": 4, "piec": 4, "tissu": 4, "thin": 4, "slab": [4, 8], "make": 4, "differenti": 4, "multipli": 4, "instead": 4, "rectangl": 4, "defin": 4, "exampl": 4, "process": 4, "lddmm": 4, "diffeomorph": 4, "molecular": 4, "digit": 4, "pathologi": 4, "mri": 4, "1038": 4, "s44172": 4, "022": 4, "00044": 4, "nd": 4, "volum": 4, "along": 4, "float": [4, 9], "thick": 4, "micron": 4, "area": 6, "differ": 6, "resoluion": 6, "step2_atlas_registr": 6, "low_path": 6, "high_path": 6, "high_num": 6, "id": [6, 8, 9], "shift": 6, "integ": 6, "dorsal": 6, "ventral": 6, "direct": 6, "appli": [6, 8], "gamma": 6, "correct": [6, 9], "onli": [6, 9], "object": [6, 9], "i2": 6, "xi": 6, "swc": [8, 9], "represent": 8, "after": 8, "step3_atlas_registr": [8, 9], "neuron_dir": [8, 9], "low_to_high_dir": 8, "tform": 8, "low_img_path": 8, "low_img_id": 8, "associ": 8, "high_img_path": 8, "high_img_id": 8, "c": [8, 9], "tupl": [8, 9], "consist": [8, 9], "alphanumer": [8, 9], "4": 8, "yongsoo": 8, "csv": 8, "upenn_labels_reoriented_origin": 8, "atlas_info_kimref_fpbasedlabel_v2": 8, "7": 8, "toggle_seg": 8, "segment": 8, "qc": 8, "toggle_cp": 8, "highlight": 8, "subregion": 8, "caudoputamen": 8, "toggle_low": 8, "toggle_high": 8, "toggle_neuron": 8, "doe": 8, "equal": 8, "AND": 8, "amount": 8, "doubl": 8, "total": 8, "class": 9, "step3_help": 9, "arg": 9, "method": 9, "my": 9, "doesn": 9, "t": 9, "do": 9, "anyth": 9, "delax": 9, "pick": 9, "fix_import": 9, "encod": 9, "ascii": 9, "error": 9, "strict": 9, "buffer": 9, "ignor": 9, "old": 9, "dictionari": 9, "find_class": 9, "specifi": 9, "necessari": 9, "import": 9, "subclass": 9, "overrid": 9, "g": 9, "restrict": 9, "arbitrari": 9, "call": 9, "whenev": 9, "both": 9, "reg_fil": 9, "load": 9, "dict": 9, "fname": 9, "skip": 9, "offset": 9, "soma": 9, "coordin": 9, "li": 9, "determin": 9, "line": 9, "begin": 9, "xyzoff": 9, "y": 9, "z": 9, "v": 9, "vertic": 9, "parent": 9, "sampl": 9, "arrow": 9, "radii": 9, "take": 9, "shape": 9, "charact": 9, "correspond": 9, "now": 9}, "objects": {"": [[3, 0, 0, "-", "step1_atlas_registration"], [4, 0, 0, "-", "step1_help"], [6, 0, 0, "-", "step2_atlas_registration"], [8, 0, 0, "-", "step3_atlas_registration"], [9, 0, 0, "-", "step3_help"]], "step1_atlas_registration": [[3, 1, 1, "", "main"]], "step1_help": [[4, 1, 1, "", "clip"], [4, 1, 1, "", "draw_stack"], [4, 1, 1, "", "gA_from_gid"], [4, 1, 1, "", "small_to_big"], [4, 1, 1, "", "str_to_2D_mat"], [4, 1, 1, "", "trapezoid"]], "step2_atlas_registration": [[6, 1, 1, "", "main"]], "step3_atlas_registration": [[8, 1, 1, "", "main"]], "step3_help": [[9, 2, 1, "", "ClassHack"], [9, 2, 1, "", "Unpickler"], [9, 1, 1, "", "backup_unpickle"], [9, 1, 1, "", "get_xyzoff"], [9, 1, 1, "", "load_swc"], [9, 1, 1, "", "str_to_list"]], "step3_help.ClassHack": [[9, 3, 1, "", "delaxes"], [9, 3, 1, "", "pick"]], "step3_help.Unpickler": [[9, 3, 1, "", "find_class"]]}, "objtypes": {"0": "py:module", "1": "py:function", "2": "py:class", "3": "py:method"}, "objnames": {"0": ["py", "module", "Python module"], "1": ["py", "function", "Python function"], "2": ["py", "class", "Python class"], "3": ["py", "method", "Python method"]}, "titleterms": {"welcom": 0, "mous": [0, 2, 5, 7], "brain": [0, 2, 5, 7], "registr": [0, 2, 3, 5, 6, 7, 8], "document": 0, "tabl": 0, "content": 0, "indic": 0, "instal": 1, "guid": 1, "step": [2, 4, 5, 7, 9, 10], "1": [2, 4, 10], "low": [2, 3, 5, 6], "atla": [2, 3], "resolut": [2, 3, 5, 6, 7], "imag": [2, 3, 5, 6, 7], "allen": 2, "command": [3, 6, 8], "line": [3, 6, 8], "argument": [3, 6, 8], "helper": [4, 9], "function": [4, 9], "2": 5, "high": [5, 6, 7], "3": [7, 9, 10], "neuron": [7, 8], "swc": 7, "represent": 7, "tutori": 10}, "envversion": {"sphinx.domains.c": 3, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 9, "sphinx.domains.index": 1, "sphinx.domains.javascript": 3, "sphinx.domains.math": 2, "sphinx.domains.python": 4, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "nbsphinx": 4, "sphinx": 60}, "alltitles": {"Welcome to the mouse brain registration documentation!": [[0, "welcome-to-the-mouse-brain-registration-documentation"]], "Table of Contents:": [[0, null]], "Indices and tables": [[0, "indices-and-tables"]], "Installation Guide": [[1, "installation-guide"]], "(Step 1) Low-to-atlas registration": [[2, "step-1-low-to-atlas-registration"]], "Low resolution mouse brain image to allen mouse brain atlas registration.": [[2, null]], "Atlas to low resolution image registration": [[3, "module-step1_atlas_registration"]], "Command line arguments": [[3, "command-line-arguments"], [6, "command-line-arguments"], [8, "command-line-arguments"]], "Step 1 helper functions": [[4, "module-step1_help"]], "(Step 2) High-to-low registration": [[5, "step-2-high-to-low-registration"]], "High resolution mouse brain image to low resolution mouse brain image registration": [[5, null]], "Low resolution image to high resolution image registration": [[6, "module-step2_atlas_registration"]], "(Step 3) Neuron Registration": [[7, "step-3-neuron-registration"]], "Registration of .swc neuronal representations to high resolution mouse brain images": [[7, null]], "Neuron registration": [[8, "module-step3_atlas_registration"]], "Step 3 helper functions": [[9, "module-step3_help"]], "Steps 1-3 tutorial": [[10, "steps-1-3-tutorial"]]}, "indexentries": {"main() (in module step1_atlas_registration)": [[3, "step1_atlas_registration.main"]], "module": [[3, "module-step1_atlas_registration"], [4, "module-step1_help"], [6, "module-step2_atlas_registration"], [8, "module-step3_atlas_registration"], [9, "module-step3_help"]], "step1_atlas_registration": [[3, "module-step1_atlas_registration"]], "clip() (in module step1_help)": [[4, "step1_help.clip"]], "draw_stack() (in module step1_help)": [[4, "step1_help.draw_stack"]], "ga_from_gid() (in module step1_help)": [[4, "step1_help.gA_from_gid"]], "small_to_big() (in module step1_help)": [[4, "step1_help.small_to_big"]], "step1_help": [[4, "module-step1_help"]], "str_to_2d_mat() (in module step1_help)": [[4, "step1_help.str_to_2D_mat"]], "trapezoid() (in module step1_help)": [[4, "step1_help.trapezoid"]], "main() (in module step2_atlas_registration)": [[6, "step2_atlas_registration.main"]], "step2_atlas_registration": [[6, "module-step2_atlas_registration"]], "main() (in module step3_atlas_registration)": [[8, "step3_atlas_registration.main"]], "step3_atlas_registration": [[8, "module-step3_atlas_registration"]], "classhack (class in step3_help)": [[9, "step3_help.ClassHack"]], "unpickler (class in step3_help)": [[9, "step3_help.Unpickler"]], "backup_unpickle() (in module step3_help)": [[9, "step3_help.backup_unpickle"]], "delaxes() (step3_help.classhack method)": [[9, "step3_help.ClassHack.delaxes"]], "find_class() (step3_help.unpickler method)": [[9, "step3_help.Unpickler.find_class"]], "get_xyzoff() (in module step3_help)": [[9, "step3_help.get_xyzoff"]], "load_swc() (in module step3_help)": [[9, "step3_help.load_swc"]], "pick() (step3_help.classhack method)": [[9, "step3_help.ClassHack.pick"]], "step3_help": [[9, "module-step3_help"]], "str_to_list() (in module step3_help)": [[9, "step3_help.str_to_list"]]}})